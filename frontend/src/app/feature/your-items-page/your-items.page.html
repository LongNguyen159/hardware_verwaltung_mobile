<ion-header>
  <ion-toolbar>
    <div class="flex flex-row items-center">
      <div>
        <ion-buttons slot="start">
          <ion-back-button defaultHref="/tabs/dashboard"></ion-back-button>
        </ion-buttons>
      </div>
      <div>
        <ion-title>
          Your items
        </ion-title>
      </div>
      <div class="flex flex-row w-full justify-end items-center pr-4">
        <!-- SELECT ITEMS BUTTON -->
        @if (isSelectMode) {
          <div>
            <ion-button style="font-size: 1rem" size="small" fill="outline" (click)="toggleSelectItems()">
              Done
            </ion-button>
          </div>
        } @else {
          <div>
            <ion-fab-button class="noBoxShadow" size="small" (click)="toggleSelectItems()" style="--background: #0891b2; --background-activated: #0e7490;">
              <ion-icon size="small" name="checkmark-circle-outline"></ion-icon>
            </ion-fab-button>
          </div>
        }
        

        <!-- SCAN QR BUTTON -->
        <div>
          <ion-fab-button class="noBoxShadow" size="small" (click)="onLendClick()" style="--background: #0891b2; --background-activated: #0e7490;">
            <ion-icon name="qr-code" size="small"></ion-icon>
          </ion-fab-button>
        </div>
      </div>
    </div>
    
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Your items</ion-title>
    </ion-toolbar>
  </ion-header>
  
  <ion-list class="ion-padding-top">
    @for (item of itemsByUser; track item.id) {
      <ion-item-sliding>
        <!-- LIST ITEMS -->
        <ion-item button [routerLink]="['/device', item.id]">
          
          @if (isSelectMode) {
            <ion-checkbox (click)="$event.stopPropagation()" justify="start" labelPlacement="end">
              <ion-label class="ion-text-wrap">
                <h3 style="font-weight: bold;">{{ item.item_name }}</h3>
                <p style="font-weight: bold;">{{ item.description }}</p>
                <p>{{ item.location }}</p>
              </ion-label>
            </ion-checkbox>
          } @else {
            <ion-label class="ion-text-wrap">
              <h3 style="font-weight: bold;">{{ item.item_name }}</h3>
              <p style="font-weight: bold;">{{ item.description }}</p>
              <p>{{ item.location }}</p>
            </ion-label>
          }
        </ion-item>

        <!-- Sliding actions buttons -->
        <ion-item-options side="end" (ionSwipe)="onReturnClick(item)">
          <ion-item-option color="warning" type="button" expandable (click)="onReturnClick(item)">Return</ion-item-option>
        </ion-item-options>
      </ion-item-sliding>
    }
  </ion-list>
</ion-content>
